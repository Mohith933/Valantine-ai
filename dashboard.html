<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="icon" type="image/x-icon" href="favicon.ico">
  <title>HeartNote AI ‚Äî Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Caveat:wght@400;600&display=swap" rel="stylesheet">

  <style>
    :root {
      --accent: #ff4d6d;
      --accent-dark: #e63950;
      --bg: #ffffff;
      --text: #222222;
      --card: #fff;
      --muted: #f9f9f9;
    }

    @media (prefers-color-scheme: dark) {
      :root {
        --bg: #0d0d0d;
        --text: #f5f5f5;
        --card: #1a1a1a;
        --muted: #141414;
        --accent: #ff668a;
        --accent-dark: #ff4d6d;
      }
    }

    * {margin:0;padding:0;box-sizing:border-box;font-family:'Poppins',sans-serif;transition:background .3s,color .3s;}
    body {background:var(--bg);color:var(--text);display:flex;min-height:100vh;overflow-x:hidden;}

    /* Sidebar */
    .sidebar {
      width:230px;background:var(--card);
      border-right:1px solid rgba(0,0,0,0.05);
      padding:30px 20px;
      display:flex;flex-direction:column;justify-content:space-between;
      position:fixed;top:0;bottom:0;left:0;
    }
    .logo{font-weight:700;font-size:1.3rem;color:var(--accent);margin-bottom:40px;display:flex;align-items:center;gap:8px;}
    .menu a{display:block;padding:12px 14px;border-radius:10px;color:var(--text);text-decoration:none;margin-bottom:6px;font-weight:500;opacity:0.85;transition:all .2s;}
    .menu a:hover,.menu a.active{background:var(--accent);color:#fff;opacity:1;}
    .upgrade-btn{background:var(--accent);color:#fff;border:none;padding:12px;border-radius:10px;font-weight:600;cursor:pointer;transition:background .2s;}
    .upgrade-btn:hover{background:var(--accent-dark);}

    /* Main area */
    .main{margin-left:230px;flex:1;padding:40px 60px;background:var(--muted);min-height:100vh;}
    .topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:40px;}
    .topbar h1{color:var(--accent);font-size:1.6rem;font-weight:700;}
    .search-bar{margin-bottom:40px;}
    .search-bar input{width:100%;padding:14px 18px;border-radius:12px;border:1px solid rgba(0,0,0,0.1);font-size:15px;background:var(--card);color:var(--text);outline:none;}

    /* Cards */
    .cards{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:24px;}
    .card{background:var(--card);padding:22px;border-radius:16px;box-shadow:0 4px 12px rgba(0,0,0,0.06);cursor:pointer;transition:transform .2s;}
    .card:hover{transform:translateY(-4px);}
    .card-icon{font-size:28px;color:var(--accent);margin-bottom:10px;}
    .card h3{font-size:1.1rem;color:var(--accent);margin-bottom:8px;}
    .card p{font-size:.9rem;opacity:.85;}

    /* Workspace */
    .workspace{display:none;animation:fadeIn .3s ease;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
    .workspace.active{display:block;}
    .form-section label {
  display: block;
  margin-bottom: 6px;
  font-weight: 600;
  color: var(--accent);
}
.copy-btn {
  background: var(--accent);
  color: #fff;
  border: none;
  padding: 6px 10px;
  border-radius: 8px;
  font-size: 0.85rem;
  cursor: pointer;
  margin-left: 10px;
  transition: background 0.2s;
}
.copy-btn:hover {
  background: var(--accent-dark);
}

    .form-container{display:flex;gap:30px;flex-wrap:wrap;}
    .form-section,.playground-section{background:var(--card);padding:24px;border-radius:14px;flex:1;min-width:300px;}
    .form-section input,.form-section textarea,.form-section select{
      width:100%;margin-bottom:14px;padding:12px;border-radius:10px;
      border:1px solid rgba(0,0,0,0.1);background:var(--muted);color:var(--text);
    }
    .handwriting {
  font-family: 'Caveat', cursive;
  font-size: 1.15rem;
  line-height: 1.7;
}

@keyframes blink {
  0%, 50%, 100% { opacity: 0; }
  25%, 75% { opacity: 1; }
}
    .recents {
  margin-top: 20px;
  background: #fff5f7;
  border-radius: 16px;
  padding: 16px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.recents h3 {
  color: #d14f6d;
  font-family: 'Caveat', cursive;
  font-size: 1.4rem;
}
.recents ul {
  list-style: none;
  padding: 0;
  margin: 0;
}
.recents li {
  background: white;
  margin-top: 8px;
  border-radius: 10px;
  padding: 10px;
  cursor: pointer;
  transition: 0.2s;
}
.recents li:hover {
  background: #ffe6eb;
}


    .form-section button{background:var(--accent);color:#fff;padding:12px 18px;border-radius:10px;border:none;font-weight:600;cursor:pointer;}
    .form-section button:hover{background:var(--accent-dark);}
    .playground-section h3{color:var(--accent);margin-bottom:10px;}
    .output{font-family:'Patrick Hand',cursive;white-space:pre-wrap;font-size:1.05rem;line-height:1.6;color:var(--text);padding-top:10px;}
    .back-btn{background:none;color:var(--accent);border:none;font-weight:600;cursor:pointer;text-decoration:underline;margin-bottom:15px;}
    footer{text-align:center;margin-top:50px;padding:20px;font-size:.9rem;opacity:.7;}

    @media(max-width:768px){
      .sidebar{display:none;}
      .main{margin:0;padding:30px;}
      .form-container{flex-direction:column;}
      .copy-btn{float:none;display:block;margin:10px auto;}
    }
  </style>
</head>
<body>

  <!-- Sidebar -->
  <aside class="sidebar">
    <div>
      <div class="logo">üíû HeartNote AI</div>
      <nav class="menu">
        <a href="#" class="active" onclick="openTool('Dashboard')">üè† Dashboard</a>
        <a href="#" onclick="openTool('Reflection')">üåø Reflection</a>
        <a href="#" onclick="openTool('Journal')">üìñ Journal</a>
        <a href="#" onclick="openTool('Affirmation')">üåà Affirmation</a>
        <a href="#" onclick="openTool('Notes')">üìù Notes</a>
        <a href="#" onclick="openTool('Letters')">üíå Letters</a>
        <a href="#" onclick="openTool('Poems')">ü™∂ Poems</a>
        <a href="#" onclick="openTool('Story')">‚ú® Story</a>
        <a href="#" onclick="openTool('Quotes')">üí≠ Quotes</a>
      </nav>
    </div>
    <button class="upgrade-btn">Upgrade to Pro üíó</button>
  </aside>

  <!-- Main -->
  <main class="main">
    <div class="topbar">
      <h1 id="welcomeText">Welcome!</h1>
    </div>

    <div class="search-bar">
      <input type="text" placeholder="Search HeartNote tools or emotions..." />
    </div>

    <!-- Dashboard Cards -->
    <div id="libraryView">
      <div class="cards">
        <div class="card" onclick="openTool('Letters')">
          <div class="card-icon">üíå</div>
          <h3>Love Letter Maker</h3>
          <p>Express heartfelt feelings through poetic letters.</p>
        </div>
        <div class="card" onclick="openTool('Affirmation')">
          <div class="card-icon">üåà</div>
          <h3>Affirmation Creator</h3>
          <p>Create uplifting affirmations to brighten your day.</p>
        </div>
        <div class="card" onclick="openTool('Journal')">
          <div class="card-icon">üìî</div>
          <h3>Mood Journal</h3>
          <p>Reflect and write about your emotions daily.</p>
        </div>
      </div>
    </div>

   <!-- Tool Workspace -->
<div id="workspaceView" class="workspace">
  <button class="back-btn" onclick="goBack()">‚Üê Back to Tools</button>
  <div class="form-container">
    <div class="form-section">
      <h3 id="toolTitle">Tool Name</h3>

      <label for="nameInput">üíó Recipient or Topic</label>
      <input type="text" id="nameInput" placeholder="Enter recipient or topic...">

      <label for="descInput">üìù What do you feel?</label>
      <textarea id="descInput" rows="4" placeholder="Write your thoughts..."></textarea>

      <label for="depthInput">üåä Depth of Emotion</label>
      <select id="depthInput">
        <option>Light</option>
        <option>Medium</option>
        <option>Deep</option>
      </select>

      <button onclick="generateContent()">Generate Content</button>
    </div>

    <div class="playground-section">
      <h3>üñãÔ∏è Playground 
        <button class="copy-btn" onclick="copyText()">Copy</button>
      </h3>
      <div id="output" class="output">Your writing will appear here...</div>
      <!-- Recents Section -->
<div id="recentsSection" class="recents">
  <h3>üïí Recent Writings</h3>
  <ul id="recentsList"></ul>
</div>

    </div>
  </div>
</div>


    <footer>¬© 2025 HeartNote AI ‚Äî Designed with üíó by Solulure Labs</footer>
  </main>

 <script>
  // --- Keep username logic ---
  const username = localStorage.getItem('heartnote_username');
  if (username) {
    document.getElementById('welcomeText').innerText = `Welcome, ${username} üíû`;
  }

  // --- Copy button function ---
  function copyText() {
    const output = document.getElementById("output").innerText;
    navigator.clipboard.writeText(output);
    alert("Copied to clipboard üíó");
  }

  // --- Navigation ---
  function openTool(name){
    document.getElementById('libraryView').style.display = 'none';
    document.getElementById('workspaceView').classList.add('active');
    document.getElementById('toolTitle').innerText = name;
    document.getElementById('output').innerText = "Your writing will appear here...";
  }

  function goBack(){
    document.getElementById('workspaceView').classList.remove('active');
    document.getElementById('libraryView').style.display = 'block';
  }

  // --- Write effect (typewriter handwriting) ---
  async function writeEffect(html, speed = 10) {
    const outputEl = document.getElementById("output");
    const lenInfo = { textContent: '' }; // dummy placeholder
    const tmp = document.createElement("div");
    tmp.innerHTML = html;
    const text = tmp.innerText;
    outputEl.innerHTML = "";

    let i = 0;
    const cursor = document.createElement("span");
    cursor.textContent = "|";
    cursor.style.animation = "blink 1s infinite";
    cursor.style.opacity = "0.8";
    cursor.style.color = "#ffbad2";
    outputEl.appendChild(cursor);
    outputEl.classList.add("handwriting");

    while (i < text.length) {
      outputEl.insertBefore(document.createTextNode(text[i]), cursor);
      i++;
      if (i % 3 === 0) await new Promise(r => setTimeout(r, speed * 0.8));
      outputEl.scrollIntoView({ behavior: "smooth", block: "end" });
    }

    cursor.remove();
    outputEl.innerHTML = html; // restore formatted HTML
  }

  // --- Content generator function from HeartNote AI ---
  function generateContent(){
    const prompt = document.getElementById('nameInput').value || 'someone special';
    const desc = document.getElementById('descInput').value || 'your emotions';
    const depth = document.getElementById('depthInput').value;
    const toolTitle = document.getElementById('toolTitle').innerText;

    // determine mode based on the tool title (simplified mapping)
    const modeMap = {
      "Reflection": "reflection",
      "Journal": "journal",
      "Notes": "note",
      "Affirmation": "affirmation",
      "Letters": "letter",
      "Poems": "poem",
      "Story": "story",
      "Quotes": "quote"
    };

    const mode = modeMap[toolTitle.split(' ')[0]] || "reflection";

    const html = generateWriting(desc, mode, depth);
    writeEffect(html);
  }

  // --- HeartNote AI Writing Logic ---
  function generateWriting(prompt, mode, emotion){
    emotion = emotion || "Medium";

    function clamp(num, min, max){ return Math.min(Math.max(num, min), max); }
    const mood = (emotion === "Light" ? 20 : emotion === "Medium" ? 60 : 90);
    const intensity = mood / 100;

    function tone(soft, balanced, deep){
      if (intensity < 0.3) return soft;
      if (intensity < 0.6) return balanced;
      return deep;
    }

    const topic = prompt || "today";

    if (mode === "reflection"){
      const opening = tone(
        `I'm pausing to let the weight of **${topic}** settle gently.`,
        `Thinking deeply about **${topic}**, I realize how much energy goes into resisting what is.`,
        `In the quiet echo of **${topic}**, I find a profound lesson.`
      );
      const closing = tone(
        `Maybe the goal isn‚Äôt speed, but simply being present in the moment.`,
        `Maybe true calm isn‚Äôt the absence of chaos‚Äîit‚Äôs seeing clearly through it.`,
        `Even in the greatest chaos, the deepest part of my intention stays gentle and true.`
      );
      return `<h2>üå§Ô∏è Reflection</h2><pre>${opening}\n\n${closing}</pre>`;
    }

    if (mode === "journal"){
      const entryDate = new Date().toLocaleDateString('en-US', { weekday:'long', year:'numeric', month:'long', day:'numeric' });
      const start = tone(
        `Date: ${entryDate}\n\nIt was a challenging day. **${topic}** stayed on my mind.`,
        `Date: ${entryDate}\n\nToday, **${topic}** brought up some complex feelings.`,
        `Date: ${entryDate}\n\nThis entry is about **${topic}** and what it teaches me.`
      );
      return `<h2>üìî Journal</h2><pre>${start}</pre>`;
    }

    if (mode === "affirmation"){
      const line = tone(
        `I'm learning to trust myself with the discomfort of **${topic}**.`,
        `I can create something good each day around **${topic}**.`,
        `I am stronger than I think. Even **${topic}** cannot dim my light.`
      );
      return `<h2>üåø Affirmation</h2><p>${line}</p>`;
    }

    if (mode === "poem"){
      const verse1 = tone(
        `When **${topic}** starts to whisper near,`,
        `In the rhythm where **${topic}** hides,`,
        `The memory of **${topic}** softly collides.`
      );
      return `<h2>ü™∂ Poem</h2><p>${verse1}</p>`;
    }

    if (mode === "letter"){
      const salutation = tone(
        `Dear Friend,`,
        `To someone who matters deeply,`,
        `My Dearest,`
      );
      const body = tone(
        `I've been thinking about **${topic}** and wanted to reach out with kindness.`,
        `**${topic}** reminded me how much our bond matters.`,
        `Even in silence, **${topic}** holds the weight of what my heart wants to say.`
      );
      const closing = tone(
        `Yours truly,`,
        `With care,`,
        `Forever,`
      );
      return `<h2>üíå Letter</h2><pre>${salutation}\n\n${body}\n\n${closing}</pre>`;
    }

    if (mode === "note"){
      const msg = tone(
        `Breathe. You have handled **${topic}** with grace.`,
        `Keep going quietly with **${topic}**, your effort matters.`,
        `You are strong beyond measure, especially facing **${topic}**.`
      );
      return `<h2>üí¨ Note</h2><p>${msg}</p>`;
    }

    if (mode === "story"){
      const intro = tone(
        `It began with **${topic}**, a spark that changed everything.`,
        `The story of **${topic}** is one of courage and growth.`,
        `**${topic}** became the legend whispered across time.`
      );
      return `<h2>‚ú® Story</h2><p>${intro}</p>`;
    }

    if (mode === "quote"){
      const quote = tone(
        `The quiet strength of **${topic}** is in the small steps.`,
        `True alignment begins when we embrace **${topic}**.`,
        `To understand love, one must first face **${topic}**.`
      );
      return `<h2>üí≠ Quote</h2><p>‚Äú${quote}‚Äù</p>`;
    }

    return `<p>üí≠ Try typing a few words like "a quiet morning" or "love story" to start writing.</p>`;
  }
   // üïí --- Local Storage Save + Load System ---
function saveRecent(title, content) {
  const recents = JSON.parse(localStorage.getItem("HeartNote_Recents")) || [];
  const entry = {
    title: title || "Untitled",
    content,
    date: new Date().toLocaleString()
  };
  
  // keep latest 10 only
  recents.unshift(entry);
  if (recents.length > 10) recents.pop();
  
  localStorage.setItem("HeartNote_Recents", JSON.stringify(recents));
  renderRecents();
}

function renderRecents() {
  const recents = JSON.parse(localStorage.getItem("HeartNote_Recents")) || [];
  const list = document.getElementById("recentsList");
  list.innerHTML = "";
  recents.forEach((r, i) => {
    const li = document.createElement("li");
    li.innerHTML = `<b>${r.title}</b><br><small>${r.date}</small>`;
    li.onclick = () => loadRecent(i);
    list.appendChild(li);
  });
}

function loadRecent(index) {
  const recents = JSON.parse(localStorage.getItem("HeartNote_Recents")) || [];
  const selected = recents[index];
  if (selected) {
    document.getElementById("output").innerHTML = selected.content;
    alert(`Loaded: ${selected.title}`);
  }
}

// Call on page load
window.addEventListener("DOMContentLoaded", renderRecents);

</script>

</body>
</html>
